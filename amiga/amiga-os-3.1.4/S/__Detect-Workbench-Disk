; Detect Workbench Disk
; ---------------------
;
; Date: 2018-10-17
; Author: Henrik Noerfjand Stengaard


; Clear screen
cls

; fail, if installdir: doesn't exist
Assign >NIL: EXISTS INSTALLDIR:
IF NOT $RC EQ 0 VAL
  echo ""
  echo "*e[1mERROR: INSTALLDIR: doesn't exist!*e[22m"
  SKIP fail
ENDIF 

; test assigns
Assign >NIL: SYSTEMDIR: DH0:

; test install amiga os 3.1.4 from disk
;execute INSTALLDIR:S/Install-Amiga-OS-3.1.4-Disk
;SKIP end

; fail, if amigaosdir: doesn't exist
Assign >NIL: EXISTS AMIGAOSDIR:
IF NOT $RC EQ 0 VAL
  echo ""
  echo "*e[1mERROR: AMIGAOSDIR: doesn't exist!*e[22m"
  SKIP fail
ENDIF 

; detect amiga os 3.9 in AMIGAOSDIR:
;Execute "INSTALLDIR:S/Amiga-OS-3.9/Detect-Amiga-OS-3.9"

; detect amiga os 3.1.4 in AMIGAOSDIR:
Execute "INSTALLDIR:S/Amiga-OS-3.1.4/Detect-Amiga-OS-3.1.4-Adf"

; detect amiga os 3.1 in AMIGAOSDIR:
;Execute "INSTALLDIR:S/Amiga-OS-3.1/Detect-Amiga-OS-3.1-Adf"


; install amiga os 3.9
IF EXISTS "INSTALLDIR:Prefs/Install-Amiga-OS-3.9"
  ; ask user to install amiga os 3.1 first
  set installamigaos31 `RequestChoice "Install Amiga OS 3.1" "Do you want to install Amiga OS 3.1*Nbefore installing Amiga OS 3.9?" "Yes|No"` 
  IF "$installamigaos31" EQ 1 VAL
    IF EXISTS "INSTALLDIR:Prefs/Install-Amiga-OS-3.1-Adf"
      ; run install amiga os 3.1 adf
    ELSE
      ; run install amiga os 3.1 disk
    ENDIF
  ENDIF

  ; run install amiga os 3.9.0
  SKIP complete
ENDIF

; install amiga os 3.1.4
IF EXISTS "INSTALLDIR:Prefs/Install-Amiga-OS-3.1.4-Adf"
  ; run install amiga os 3.1.4 adf
  Execute "INSTALLDIR:S/Amiga-OS-3.1.4/Install-Amiga-OS-3.1.4-Adf"

  SKIP complete
ENDIF

; install amiga os from disk
echo "install amiga os from disk"
SKIP end


; complete
; --------

LAB complete
echo ""
echo "Complete"

SKIP end


; fail
; ----

LAB fail
echo ""
echo "Installation failed."
quit


; end
; ---
LAB end
